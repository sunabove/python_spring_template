<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" >

<head th:replace="~{layout.html :: head}">

	<title th:text="${html.title}"> html.title </title>
	<base th:href="@{/}">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

	<link rel="stylesheet" th:href="@{/rsc/css/python.css}" href="rsc/css/python.css" />
	<link rel="stylesheet" th:href="@{/rsc/css/sidebars.css}" href="./rsc/css/sidebars.css" />

	<!-- Font Awesome icons (free version)-->
	<script src="https://use.fontawesome.com/releases/v6.5.2/js/all.js" crossorigin="anonymous"></script>
	<script src="https://kit.fontawesome.com/fb6a9a8bef.js" crossorigin="anonymous"></script>

	<!-- Google fonts-->
	<link rel="preconnect" href="https://fonts.gstatic.com" />
	<link href="https://fonts.googleapis.com/css2?family=Tinos:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&amp;display=swap" rel="stylesheet" />

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.1.2/dist/chart.umd.min.js"></script>

</head> 

<body class="container-fluid" >

	<!--  start of header --> 

	<div th:replace="~{layout.html :: header}" >
	</div>
	
	<!-- end of header -->

	<!-- main content -->

	<div class="wrapper d-flex align-items-stretch border-top border-bottom" >

		<!--  side bar left -->
		<nav th:replace="~{layout.html :: sidebarLeft}" id="sidebarLeft" class="container-fluid col-auto d-md-block bg-body-tertiary sidebar collapse">
		</nav>
		<!-- // side bar left --> 

		<!-- main content --> 
 
		<main class="me-2 container-fluid">

			<div class="card text-center mt-3">
		
				<div class="card-header d-flex justify-content-center">
					<span class="h4 p-0 m-0"> <i class="fa-brands fa-youtube fa-xl"></i> &nbsp; 파이썬 유투브 </span>
				</div> 
		
				<div class="card-body d-flex justify-content-center p-0 m-0">
					<div class="accordion w-100" id="groupAccordion">
						<!-- 그룹 1 -->
						<div class="accordion-item">
							<h2 class="accordion-header" id="headingOne">
								<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
									그룹 1
								</button>
							</h2>
							<div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#groupAccordion">
								<div class="accordion-body p-0 m-0">
									<div class="container">
										<div class="d-flex align-items-center">
											<!-- 이전 버튼 영역 -->
											<div class="col-1 d-flex align-items-center justify-content-center">
												<button class="carousel-control-prev" type="button" data-bs-target="#multiCarousel" data-bs-slide="prev"
													style="background-color: rgba(0, 0, 0, 0.5); border-radius: 50%;
														   width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;">
													<span class="carousel-control-prev-icon" aria-hidden="true"></span>
													<span class="visually-hidden">Previous</span>
												</button>
											</div>
									
											<!-- 캐러셀 슬라이드 영역 -->
											<div class="col-10">
												<div id="multiCarousel" class="carousel slide" data-bs-ride="carousel">
													<div class="carousel-inner">
														<div class="carousel-item active">
															<div class="row">
																<div class="col-lg-3 col-md-4 col-sm-6">
																	<img src="https://via.placeholder.com/300x200/ff9999" class="d-block w-100" alt="Item 1">
																</div>
																<div class="col-lg-3 col-md-4 col-sm-6">
																	<img src="https://via.placeholder.com/300x200/99ff99" class="d-block w-100" alt="Item 2">
																</div>
																<div class="col-lg-3 col-md-4 d-none d-sm-block">
																	<img src="https://via.placeholder.com/300x200/9999ff" class="d-block w-100" alt="Item 3">
																</div>
																<div class="col-lg-3 d-none d-lg-block">
																	<img src="https://via.placeholder.com/300x200/ffff99" class="d-block w-100" alt="Item 4">
																</div>
															</div>
														</div>
														<div class="carousel-item">
															<div class="row">
																<div class="col-lg-3 col-md-4 col-sm-6">
																	<img src="https://via.placeholder.com/300x200/ff99ff" class="d-block w-100" alt="Item 5">
																</div>
																<div class="col-lg-3 col-md-4 col-sm-6">
																	<img src="https://via.placeholder.com/300x200/99ffff" class="d-block w-100" alt="Item 6">
																</div>
																<div class="col-lg-3 col-md-4 d-none d-sm-block">
																	<img src="https://via.placeholder.com/300x200/ffcc99" class="d-block w-100" alt="Item 7">
																</div>
																<div class="col-lg-3 d-none d-lg-block">
																	<img src="https://via.placeholder.com/300x200/ccff99" class="d-block w-100" alt="Item 8">
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
									
											<!-- 다음 버튼 영역 -->
											<div class="col-1 d-flex align-items-center justify-content-center">
												<button class="carousel-control-next" type="button" data-bs-target="#multiCarousel" data-bs-slide="next"
													style="background-color: rgba(0, 0, 0, 0.5); border-radius: 50%;
														   width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;">
													<span class="carousel-control-next-icon" aria-hidden="true"></span>
													<span class="visually-hidden">Next</span>
												</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						
						<!-- 그룹 2 --> 
						<div class="accordion-item">
							<h2 class="accordion-header" id="headingTwo">
								<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
									그룹 2
								</button>
							</h2>
							<div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#groupAccordion">
								<div class="accordion-body">
									<ul class="list-group">
										<li class="list-group-item">아이템 2-1</li>
										<li class="list-group-item">아이템 2-2</li>
										<li class="list-group-item">아이템 2-3</li>
									</ul>
								</div>
							</div>
						</div>
					</div> 
				</div>
			</div>

			<div class="card text-center mt-3">
		
				<div class="card-header d-flex justify-content-center">
					<span class="h4 p-0 m-0"> <i class="fa-brands fa-youtube fa-xl"></i> &nbsp; 파이썬 유투브 </span>
				</div>
		
				<script>
					const apiKey = 'AIzaSyBAjSZD4sldb4ESh5RF-jijb_vZEYxcRg0'; // API 키 보안에 주의하세요!
					const channelId = 'UChtLQnkBZ8KZ-8b3K9xNS9w'; // Python Korea 채널 ID
				</script>
		
				<div class="card-body d-flex justify-content-center">
					<div id="playlists" class="playlists-container" 
						 style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; padding: 20px; align-items: stretch;">
						<p>재생목록을 불러오는 중...</p>
					</div>
		
					<!-- 📌 템플릿 요소 (미리 스타일 적용) -->
					<div id="playlist-template" class="playlist-card" style="display: none; width: 240px; background: #f9f9f9; border-radius: 10px; padding: 15px; text-align: center; box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease-in-out; display: flex; flex-direction: column; height: auto; min-height: 280px;">
						<img src="" alt="" class="playlist-thumbnail" style="width: 100%; max-width: 100%; border-radius: 8px;">
						<h3 class="playlist-title" style="font-size: 16px; margin: 10px 0; font-weight: bold;"></h3>
						<p class="playlist-description" style="font-size: 14px; color: #666; word-wrap: break-word; white-space: normal; max-height: 60px; overflow: hidden; text-overflow: ellipsis;"></p>
						<a href="#" target="_blank" class="playlist-link" style="display: inline-block; margin-top: auto; padding: 8px 12px; background: #007bff; color: white; text-decoration: none; border-radius: 5px; font-size: 14px; font-weight: bold; transition: background 0.3s ease-in-out;">재생목록 보기</a>
					</div>
		
					<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
					<script>
						$(document).ready(function () {
							async function fetchPlaylists() {
								try {
									const response = await fetch(
										`https://www.googleapis.com/youtube/v3/playlists?part=snippet&channelId=${channelId}&maxResults=10&key=${apiKey}`
									);
									const data = await response.json();
		
									const $container = $("#playlists");
									const $template = $("#playlist-template");
									$template.remove(); // 템플릿 요소 제거
		
									$container.empty(); // 기존 내용 초기화
									
		
									if (!data.items || data.items.length === 0) {
										$container.html("<p>재생목록이 없습니다.</p>");
										return;
									}
		
									// 📌 'A'로 시작하는 제목 제외 및 첫 단어가 알파벳 한 글자인 경우 삭제
									let playlists = data.items
										.filter(playlist => !playlist.snippet.title.startsWith('A')) // 'A'로 시작하는 제목 제외
										.map(playlist => {
											let title = playlist.snippet.title;
											let words = title.split(' ');
		
											// 📌 첫 번째 단어가 알파벳 한 글자인 경우 제거
											if (words[0].length === 1 && /^[A-Z]$/.test(words[0])) {
												words.shift();
											}
		
											let modifiedTitle = words.join(' '); // 수정된 제목
		
											return { ...playlist, modifiedTitle }; // 수정된 제목을 객체에 추가
										});
		
									// 📌 제목을 알파벳 순으로 정렬
									playlists.sort((a, b) => a.modifiedTitle.localeCompare(b.modifiedTitle));
		
									// 📌 재생목록 UI 생성
									playlists.forEach(playlist => {
										const title = playlist.modifiedTitle;
										const description = playlist.snippet.description;
										const thumbnail = playlist.snippet.thumbnails?.medium?.url || "";
										const playlistId = playlist.id;
		
										// 📌 템플릿 클론 생성
										const $clone = $template.clone().removeAttr("id").show();
		
										// 📌 클론 내부 요소 업데이트
										$clone.find(".playlist-thumbnail").attr("src", thumbnail).attr("alt", title);
										$clone.find(".playlist-title").text(title);
										$clone.find(".playlist-description").text(description);
										$clone.find(".playlist-link").attr("href", `https://www.youtube.com/playlist?list=${playlistId}`);
		
										// 📌 복제된 요소 추가
										$container.append($clone);
									});
		
									// 📌 호버 효과 추가 (CSS가 없으므로 jQuery로 처리)
									$(".playlist-card").hover(
										function () { $(this).css("transform", "scale(1.05)"); },
										function () { $(this).css("transform", "scale(1)"); }
									);
		
									$(".playlist-link").hover(
										function () { $(this).css("background", "#0056b3"); },
										function () { $(this).css("background", "#007bff"); }
									);
		
								} catch (error) {
									console.error("API 요청 중 오류 발생:", error);
									$("#playlists").html("<p>재생목록을 불러오는 데 실패했습니다.</p>");
								}
							}
		
							fetchPlaylists();
						});
					</script>
		
				</div>
		
				<div class="card-footer d-flex justify-content-center">
					푸터
				</div>
		
			</div>
		
		</main>
		

		<!-- // main content --> 

		<!--  side bar right -->
		<nav th:replace="~{layout.html :: sidebarRight}" id="sidebarRight" class="col-auto d-md-block bg-body-tertiary_ sidebar collapse">
		</nav>
		<!-- // side bar right-->
		
	</div>

	<!-- // main content -->

	<!-- footer -->

	<footer th:replace="~{layout.html :: footer}" class="text-center text-lg-start bg-light text-muted">
	</footer>

	<!-- // footer -->

</body>

</html>

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" >

<head th:replace="~{layout.html :: head}">

	<title th:text="${html.title}"> html.title </title>
	<base th:href="@{/}">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

	<link rel="stylesheet" th:href="@{/rsc/css/python.css}" href="rsc/css/python.css" />
	<link rel="stylesheet" th:href="@{/rsc/css/sidebars.css}" href="./rsc/css/sidebars.css" />

	<!-- Font Awesome icons (free version)-->
	<script src="https://use.fontawesome.com/releases/v6.5.2/js/all.js" crossorigin="anonymous"></script>
	<script src="https://kit.fontawesome.com/fb6a9a8bef.js" crossorigin="anonymous"></script>

	<!-- Google fonts-->
	<link rel="preconnect" href="https://fonts.gstatic.com" />
	<link href="https://fonts.googleapis.com/css2?family=Tinos:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&amp;display=swap" rel="stylesheet" />

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.1.2/dist/chart.umd.min.js"></script>

</head> 

<body class="container-fluid" >

	<!--  start of header --> 

	<div th:replace="~{layout.html :: header}" >
	</div>
	
	<!-- end of header -->

	<!-- main content -->

	<div class="wrapper d-flex align-items-stretch border-top border-bottom" >

		<!--  side bar left -->
		<nav th:replace="~{layout.html :: sidebarLeft}" id="sidebarLeft" class="container-fluid col-auto d-md-block bg-body-tertiary sidebar collapse">
		</nav>
		<!-- // side bar left --> 

		<!-- main content --> 

		<main class="me-2 container-fluid" style="overflow-y: auto; "> 

			<div class="card text-center mt-3">

				<div class="card-header d-flex justify-content-center">
					<span class="h5"> íŒŒì´ì¬ ìœ íˆ¬ë¸Œ </span>
				</div>

				<script>
					const apiKey = 'AIzaSyBAjSZD4sldb4ESh5RF-jijb_vZEYxcRg0'; // API í‚¤ ë³´ì•ˆì— ì£¼ì˜í•˜ì„¸ìš”!
					const channelId = 'UChtLQnkBZ8KZ-8b3K9xNS9w'; // Python Korea ì±„ë„ ID
				</script>

				<div class="card-body d-flex justify-content-center">
					<div id="playlists" class="playlists-container">
						<p>ì¬ìƒëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
					</div>

					<!-- ğŸ“Œ í…œí”Œë¦¿ ìš”ì†Œ ì¶”ê°€ -->
					<div id="playlist-template" class="playlist-card" style="display: none;">
						<img src="" alt="" class="playlist-thumbnail">
						<h3 class="playlist-title"></h3>
						<p class="playlist-description"></p>
						<a href="#" target="_blank" class="playlist-link">ì¬ìƒëª©ë¡ ë³´ê¸°</a>
					</div>

					<script> 
						async function fetchPlaylists() {
							try {
								const response = await fetch(
									`https://www.googleapis.com/youtube/v3/playlists?part=snippet&channelId=${channelId}&maxResults=10&key=${apiKey}`
								);
								const data = await response.json();

								const container = document.getElementById("playlists");
								const template = document.getElementById("playlist-template");

								container.innerHTML = ""; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”

								if (!data.items || data.items.length === 0) {
									container.innerHTML = "<p>ì¬ìƒëª©ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>";
									return;
								}

								// ğŸ“Œ 'A'ë¡œ ì‹œì‘í•˜ëŠ” ì œëª© ì œì™¸ ë° ì²« ë‹¨ì–´ê°€ ì•ŒíŒŒë²³ í•œ ê¸€ìì¸ ê²½ìš° ì‚­ì œ
								let playlists = data.items
									.filter(playlist => !playlist.snippet.title.startsWith('A')) // 'A'ë¡œ ì‹œì‘í•˜ëŠ” ì œëª© ì œì™¸
									.map(playlist => {
										let title = playlist.snippet.title;
										let words = title.split(' ');

										// ğŸ“Œ ì²« ë²ˆì§¸ ë‹¨ì–´ê°€ ì•ŒíŒŒë²³ í•œ ê¸€ìì¸ ê²½ìš° ì œê±°
										if (words[0].length === 1 && /^[A-Z]$/.test(words[0])) {
											words.shift();
										}

										let modifiedTitle = words.join(' '); // ìˆ˜ì •ëœ ì œëª©

										return { ...playlist, modifiedTitle }; // ìˆ˜ì •ëœ ì œëª©ì„ ê°ì²´ì— ì¶”ê°€
									});

								// ğŸ“Œ ì œëª©ì„ ì•ŒíŒŒë²³ ìˆœìœ¼ë¡œ ì •ë ¬
								playlists.sort((a, b) => a.modifiedTitle.localeCompare(b.modifiedTitle));

								// ğŸ“Œ ì¬ìƒëª©ë¡ UI ìƒì„±
								playlists.forEach(playlist => {
									const title = playlist.modifiedTitle;
									const description = playlist.snippet.description;
									const thumbnail = playlist.snippet.thumbnails?.medium?.url || "";
									const playlistId = playlist.id;

									// ğŸ“Œ í…œí”Œë¦¿ í´ë¡  ìƒì„±
									const clone = template.cloneNode(true);
									clone.style.display = "block";

									// ğŸ“Œ í´ë¡  ë‚´ë¶€ ìš”ì†Œ ì—…ë°ì´íŠ¸
									clone.querySelector(".playlist-thumbnail").src = thumbnail;
									clone.querySelector(".playlist-thumbnail").alt = title;
									clone.querySelector(".playlist-title").textContent = title;
									clone.querySelector(".playlist-description").textContent = description;
									clone.querySelector(".playlist-link").href = `https://www.youtube.com/playlist?list=${playlistId}`;

									// ğŸ“Œ ë³µì œëœ ìš”ì†Œ ì¶”ê°€
									container.appendChild(clone);
								});
							} catch (error) {
								console.error("API ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
								document.getElementById("playlists").innerHTML = "<p>ì¬ìƒëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>";
							}
						}

						fetchPlaylists();

					</script>

					<style>
						/* ğŸ“Œ ì¬ìƒëª©ë¡ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
						.playlists-container {
							display: flex;
							flex-wrap: wrap;  /* ğŸ“Œ ì—¬ëŸ¬ ì¤„ë¡œ ë°°ì¹˜ ê°€ëŠ¥ */
							justify-content: center; /* ğŸ“Œ ê°€ìš´ë° ì •ë ¬ */
							gap: 15px; /* ğŸ“Œ ì¹´ë“œ ê°„ê²© */
							padding: 20px;
							align-items: stretch; /* ğŸ“Œ ì¹´ë“œ ë†’ì´ ë™ì¼í•˜ê²Œ ì¡°ì • */
						}

						/* ğŸ“Œ ì¬ìƒëª©ë¡ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
						.playlist-card {
							width: 240px; /* ì¹´ë“œ ë„ˆë¹„ */
							background: #f9f9f9;
							border-radius: 10px;
							padding: 15px;
							text-align: center;
							box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
							transition: transform 0.3s ease-in-out;
							display: flex;
							flex-direction: column;
							height: auto; /* ğŸ“Œ ë‚´ìš©ì— ë§ê²Œ ì¡°ì • */
							min-height: 320px; /* ğŸ“Œ ìµœì†Œ ë†’ì´ ì„¤ì • */
						}

						/* ğŸ“Œ ì¹´ë“œ í˜¸ë²„ íš¨ê³¼ */
						.playlist-card:hover {
							transform: scale(1.05);
						}

						/* ğŸ“Œ ì¸ë„¤ì¼ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
						.playlist-thumbnail {
							width: 100%;
							max-width: 100%;
							border-radius: 8px;
						}

						/* ğŸ“Œ ì¬ìƒëª©ë¡ ì œëª© */
						.playlist-title {
							font-size: 16px;
							margin: 10px 0;
							font-weight: bold;
						}

						/* ğŸ“Œ ì¬ìƒëª©ë¡ ì„¤ëª… */
						.playlist-description {
							font-size: 14px;
							color: #666;
							word-wrap: break-word;
							white-space: normal;
							max-height: 60px; /* ğŸ“Œ ìµœëŒ€ ë†’ì´ ì œí•œ */
							overflow: hidden; /* ğŸ“Œ ë„˜ì¹˜ë©´ ìˆ¨ê¹€ */
							text-overflow: ellipsis; /* ğŸ“Œ ë§ì¤„ì„í‘œ ì¶”ê°€ */
						}

						/* ğŸ“Œ ì¬ìƒëª©ë¡ ë³´ê¸° ë²„íŠ¼ */
						.playlist-link {
							display: inline-block;
							margin-top: auto; /* ğŸ“Œ ë²„íŠ¼ì„ í•­ìƒ ì•„ë˜ì— ìœ„ì¹˜ */
							padding: 8px 12px;
							background: #007bff; /* ğŸ“Œ íŒŒë€ìƒ‰ ê³„ì—´ */
							color: white;
							text-decoration: none;
							border-radius: 5px;
							font-size: 14px;
							font-weight: bold;
							transition: background 0.3s ease-in-out;
						}

						.playlist-link:hover {
							background: #0056b3;
						}

						
					</style>
				</div>

				<div class="card-footer d-flex justify-content-center">
					í‘¸í„°
				</div>

			</div>
			 
		</main>

		<!-- // main content --> 

		<!--  side bar right -->
		<nav th:replace="~{layout.html :: sidebarRight}" id="sidebarRight" class="col-auto d-md-block bg-body-tertiary_ sidebar collapse">
		</nav>
		<!-- // side bar right-->
		
	</div>

	<!-- // main content -->

	<!-- footer -->

	<footer th:replace="~{layout.html :: footer}" class="text-center text-lg-start bg-light text-muted">
	</footer>

	<!-- // footer -->

</body>

</html>
